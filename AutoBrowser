"""The purpose of this program is to automate the opening and the logging in of multiple websites onto separate tabs
within incognito mode of google chrome."""

import webbrowser
import requests
from webbot import Browser
global web


links = [
'www.gmail.com',
'https://courses.edx.org/login',
'https://www.reddit.com/login/',
'https://github.com/login',
]

gmail = links[0]
edx = links[1]
reddit = links[2]
github = links[3]

#Windows Chrome file path
chrome_path = 'C:/Program Files (x86)/Google/Chrome/Application/chrome.exe %s --incognito'

#MacOS Chrome file path
#chrome_path = 'open -a /Applications/Google\ Chrome.app %s --incognito'

def edx_login():
    payload = {'email': 'email', 'password': 'password'}

    r1 = requests.get(edx, data=payload)

    header ={'X-CSRFToken': r1.headers['Set-Cookie'].split('=')[1].split(';')[0],
     'Referer': 'https://www.edx.org',
     'X-Requested-With': 'XMLHttpRequest'}


    r2 = requests.post(edx, data=payload, cookies=r1.cookies, headers = header)
    print(r2.content)

    webbrowser.get(chrome_path).open_new_tab(r2.url)

def edx_login2():
    web = Browser(edx_login())
    web.go_to('https://courses.edx.org/login')
    web.type('email', into='email')
    web.type('password', into='password')
    web.click('Sign in')


edx_login()
